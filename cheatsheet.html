<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blocks Language Cheatsheet</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Theme variables - Light (default) */
    :root {
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #f5f5f5;
      --text-primary: #333;
      --text-secondary: #666;
      --border-color: #ddd;
      --code-bg: #2d2d2d;
      --code-text: #f8f8f2;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-secondary);
      padding: 2rem;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: var(--bg-primary);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    /* Header with controls */
    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .header-main h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .header-main p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .header-controls {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      backdrop-filter: blur(10px);
    }

    .control-group label {
      font-size: 1.2rem;
    }

    .control-group select {
      background: white;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      color: #333;
    }

    .control-group select:hover {
      background: #f5f5f5;
    }

    .content {
      padding: 2rem;
      color: var(--text-primary);
    }

    .section {
      margin-bottom: 3rem;
    }

    .section h2 {
      font-size: 1.8rem;
      color: #667eea;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid #667eea;
    }

    .section h3 {
      font-size: 1.3rem;
      color: #764ba2;
      margin: 1.5rem 0 1rem 0;
    }

    .syntax-item {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: var(--bg-secondary);
      border-radius: 6px;
      border-left: 4px solid #667eea;
    }

    .syntax-item h4 {
      font-size: 1.1rem;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .syntax-item p {
      margin-bottom: 1rem;
      color: var(--text-secondary);
    }

    /* Code blocks - INVERTED THEME */
    .code-example {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 1rem;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .code-example pre {
      margin: 0;
    }

    .result {
      background: #e8f5e9;
      padding: 1rem;
      border-radius: 4px;
      border-left: 4px solid #4caf50;
      margin-top: 0.5rem;
    }

    .result::before {
      content: '‚Üí R√©sultat : ';
      font-weight: 600;
      color: #2e7d32;
    }

    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .note::before {
      content: 'üí° ';
      font-weight: 600;
    }

    .warning {
      background: #ffebee;
      border-left: 4px solid #f44336;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .warning::before {
      content: '‚ö†Ô∏è ';
      font-weight: 600;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }

    th, td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background: #667eea;
      color: white;
      font-weight: 600;
    }

    tr:hover {
      background: #f5f5f5;
    }

    code {
      background: var(--bg-tertiary);
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 0.9em;
      color: #e83e8c;
    }

    .toc {
      background: var(--bg-secondary);
      padding: 1.5rem;
      border-radius: 6px;
      margin-bottom: 2rem;
    }

    .toc h3 {
      margin-bottom: 1rem;
      color: #667eea;
    }

    .toc ul {
      list-style: none;
    }

    .toc li {
      margin-bottom: 0.5rem;
    }

    .toc a {
      color: #667eea;
      text-decoration: none;
      transition: color 0.2s;
    }

    .toc a:hover {
      color: #764ba2;
      text-decoration: underline;
    }

    footer {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 2rem;
      text-align: center;
    }

    /* Theme Dark */
    [data-theme="dark"] {
      --bg-primary: #1e1e1e;
      --bg-secondary: #252525;
      --bg-tertiary: #2d2d2d;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --border-color: #404040;
      --code-bg: #f5f5f5;
      --code-text: #2d2d2d;
    }

    [data-theme="dark"] body {
      background: var(--bg-secondary);
    }

    [data-theme="dark"] .container {
      background: var(--bg-primary);
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    [data-theme="dark"] th {
      background: #764ba2;
    }

    [data-theme="dark"] tr:hover {
      background: var(--bg-tertiary);
    }

    [data-theme="dark"] code {
      background: var(--bg-tertiary);
      color: #e83e8c;
    }

    [data-theme="dark"] .toc {
      background: var(--bg-secondary);
    }

    [data-theme="dark"] .note {
      background: #3a3a2a;
      border-left-color: #ffc107;
    }

    [data-theme="dark"] .warning {
      background: #3a2a2a;
      border-left-color: #f44336;
    }

    [data-theme="dark"] .result {
      background: #2a3a2a;
      border-left-color: #4caf50;
      color: #a0e0a0;
    }

    /* Theme Auto - uses prefers-color-scheme */
    @media (prefers-color-scheme: dark) {
      [data-theme="auto"] {
        --bg-primary: #1e1e1e;
        --bg-secondary: #252525;
        --bg-tertiary: #2d2d2d;
        --text-primary: #e0e0e0;
        --text-secondary: #a0a0a0;
        --border-color: #404040;
        --code-bg: #f5f5f5;
        --code-text: #2d2d2d;
      }
      
      [data-theme="auto"] body {
        background: var(--bg-secondary);
      }
      
      [data-theme="auto"] .container {
        background: var(--bg-primary);
        box-shadow: 0 2px 10px rgba(0,0,0,0.5);
      }
      
      [data-theme="auto"] th {
        background: #764ba2;
      }
      
      [data-theme="auto"] tr:hover {
        background: var(--bg-tertiary);
      }
      
      [data-theme="auto"] code {
        background: var(--bg-tertiary);
        color: #e83e8c;
      }
      
      [data-theme="auto"] .toc {
        background: var(--bg-secondary);
      }
      
      [data-theme="auto"] .note {
        background: #3a3a2a;
        border-left-color: #ffc107;
      }
      
      [data-theme="auto"] .warning {
        background: #3a2a2a;
        border-left-color: #f44336;
      }
      
      [data-theme="auto"] .result {
        background: #2a3a3a;
        border-left-color: #4caf50;
        color: #a0e0a0;
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        text-align: center;
      }
      
      .header-main h1 {
        font-size: 2rem;
      }
      
      .header-controls {
        flex-direction: column;
        width: 100%;
      }
      
      .control-group {
        width: 100%;
        justify-content: center;
      }
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .container {
        box-shadow: none;
      }
      .header-controls {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div class="header-main">
          <h1>üìö <span id="pageTitle">Blocks Language</span></h1>
          <p id="pageSubtitle">Complete syntax reference guide</p>
        </div>
        <div class="header-controls">
          <a href="public/playground.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: rgba(255,255,255,0.2); border-radius: 6px; transition: background 0.2s; margin-right: 0.5rem;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">üéÆ Playground</a>
          <a href="https://github.com/jt291/blocks" target="_blank" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: rgba(255,255,255,0.2); border-radius: 6px; transition: background 0.2s; margin-right: 1rem;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">üì¶ GitHub</a>
          <div class="control-group">
            <label for="langSelect">üåê</label>
            <select id="langSelect">
              <option value="en">English</option>
              <option value="fr">Fran√ßais</option>
            </select>
          </div>
          <div class="control-group">
            <label for="themeSelect">üé®</label>
            <select id="themeSelect">
              <option value="auto">Auto</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </div>
        </div>
      </div>
    </header>

    <div class="content">
      <!-- Table des mati√®res -->
      <div class="toc">
        <h3 data-i18n="toc">Table of Contents</h3>
        <ul>
          <li><a href="#commentaires" data-i18n="sections.comments.title">1. Comments</a></li>
          <li><a href="#code" data-i18n="sections.code.title">2. Code Blocks and Inlines</a></li>
          <li><a href="#script" data-i18n="sections.script.title">3. Script Blocks and Inlines</a></li>
          <li><a href="#generic" data-i18n="sections.generic.title">4. Generic Blocks and Inlines</a></li>
          <li><a href="#attributs" data-i18n="sections.attributes.title">5. Attributes</a></li>
          <li><a href="#imbrication" data-i18n="sections.nesting.title">6. Nesting</a></li>
          <li><a href="#nommage" data-i18n="sections.naming.title">7. Naming</a></li>
          <li><a href="#preprocessor" data-i18n="sections.preprocessor.title">8. Preprocessor Directives</a></li>
          <li><a href="#attributes-metadata">9. Attributes vs Metadata</a></li>
          <li><a href="#inline-elements">10. Inline Elements</a></li>
          <li><a href="#variables">11. Variables</a></li>
          <li><a href="#filter-reference">12. Filter Reference</a></li>
          <li><a href="#complete-example">13. Complete Example</a></li>
        </ul>
      </div>

      <!-- 1. Commentaires -->
      <section id="commentaires" class="section">
        <h2>1. üìù <span data-i18n="sections.comments.title">Comments</span></h2>

        <div class="syntax-item">
          <h4 data-i18n="sections.comments.blockComment.title">Block comment</h4>
          <p data-i18n="sections.comments.blockComment.desc">Multi-line comment that doesn't appear in final output.</p>
          <div class="code-example"><pre>/* Ceci est un commentaire
   sur plusieurs lignes */</pre></div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.comments.blockCommentNamed.title">Named block comment</h4>
          <p data-i18n="sections.comments.blockCommentNamed.desc">Comment with an identifier for reference or specific processing.</p>
          <div class="code-example"><pre>/*#note Ce commentaire a un nom */</pre></div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.comments.inlineComment.title">Inline comment</h4>
          <p data-i18n="sections.comments.inlineComment.desc">Single-line comment, integrated in text.</p>
          <div class="code-example"><pre>Texte avant // commentaire inline // texte apr√®s</pre></div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.comments.inlineCommentNamed.title">Named inline comment</h4>
          <p data-i18n="sections.comments.inlineCommentNamed.desc">Inline comment with an identifier.</p>
          <div class="code-example"><pre>Texte //#todo √† compl√©ter // suite</pre></div>
        </div>
      </section>

      <!-- 2. Code -->
      <section id="code" class="section">
        <h2>2. üíª <span data-i18n="sections.code.title">Code Blocks and Inlines</span></h2>

        <div class="syntax-item">
          <h4 data-i18n="sections.code.simpleBlock.title">Simple code block</h4>
          <p data-i18n="sections.code.simpleBlock.desc">Code block with minimum 3 backticks.</p>
          <div class="code-example"><pre>```
const x = 1;
console.log(x);
```</pre></div>
          <div class="result">CodeBlock avec le contenu</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.code.namedBlock.title">Named code block</h4>
          <p data-i18n="sections.code.namedBlock.desc">Code block with a language or identifier.</p>
          <div class="code-example"><pre>```#javascript
const greet = () =&gt; 'Hello';
```</pre></div>
          <div class="result">CodeBlock avec name="javascript"</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.code.blockWithAttrs.title">Code block with attributes</h4>
          <p data-i18n="sections.code.blockWithAttrs.desc">Code block enriched with metadata.</p>
          <div class="code-example"><pre>```#python {#example .highlighted}
print("Hello World")
```</pre></div>
          <div class="result">CodeBlock avec name="python" et attributs (id, classes)</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.code.simpleInline.title">Simple inline code</h4>
          <p data-i18n="sections.code.simpleInline.desc">Code integrated in a line of text.</p>
          <div class="code-example"><pre>La variable `count` contient la valeur.</pre></div>
          <div class="result">Text + CodeInline + Text</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.code.namedInline.title">Named inline code</h4>
          <p data-i18n="sections.code.namedInline.desc">Inline code with a language identifier.</p>
          <div class="code-example"><pre>Utilisez `#js console.log()` pour d√©boguer.</pre></div>
          <div class="result">CodeInline avec name="js"</div>
        </div>

        <div class="note" data-i18n="sections.code.note">
          Opening and closing backticks must have the <strong>same number</strong> of characters.
        </div>
      </section>

      <!-- 3. Script -->
      <section id="script" class="section">
        <h2>3. ‚ö° <span data-i18n="sections.script.title">Script Blocks and Inlines</span></h2>

        <div class="syntax-item">
          <h4 data-i18n="sections.script.simpleBlock.title">Simple script block</h4>
          <p data-i18n="sections.script.simpleBlock.desc">Executable script block with minimum 3 exclamation marks.</p>
          <div class="code-example"><pre>!!!
alert('Hello');
!!!</pre></div>
          <div class="result">ScriptBlock avec le contenu</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.script.namedBlock.title">Named script block</h4>
          <p data-i18n="sections.script.namedBlock.desc">Script block with an identifier.</p>
          <div class="code-example"><pre>!!!#init
setupApplication();
!!!</pre></div>
          <div class="result">ScriptBlock avec name="init"</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.script.simpleInline.title">Simple inline script</h4>
          <p data-i18n="sections.script.simpleInline.desc">Executable script integrated in text.</p>
          <div class="code-example"><pre>Cliquez !alert('Bonjour')! pour tester.</pre></div>
          <div class="result">Text + ScriptInline + Text</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.script.namedInline.title">Named inline script</h4>
          <p data-i18n="sections.script.namedInline.desc">Inline script with an identifier.</p>
          <div class="code-example"><pre>Action !#onclick handleClick()! ici.</pre></div>
          <div class="result">ScriptInline avec name="onclick"</div>
        </div>

        <div class="warning" data-i18n="sections.script.warning">
          Opening and closing delimiters must have the <strong>same number</strong> of exclamation marks.
        </div>
      </section>

      <!-- 4. Generic -->
      <section id="generic" class="section">
        <h2>4. üì¶ <span data-i18n="sections.generic.title">Generic Blocks and Inlines</span></h2>

        <div class="syntax-item">
          <h4 data-i18n="sections.generic.simpleBlock.title">Simple generic block</h4>
          <p data-i18n="sections.generic.simpleBlock.desc">Generic container block with minimum 3 colons.</p>
          <div class="code-example"><pre>:::
Contenu du bloc
:::</pre></div>
          <div class="result">GenericBlock avec le contenu</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.generic.namedBlock.title">Named generic block</h4>
          <p data-i18n="sections.generic.namedBlock.desc">Block with a type name (div, section, aside, etc.).</p>
          <div class="code-example"><pre>:::#container
Contenu de mon conteneur
:::</pre></div>
          <div class="result">GenericBlock avec name="container"</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.generic.blockWithAttrs.title">Generic block with attributes</h4>
          <p data-i18n="sections.generic.blockWithAttrs.desc">Block enriched with ID, classes, options and key-value pairs.</p>
          <div class="code-example"><pre>:::#section {#intro .highlight .bordered %active}
Contenu avec attributs
:::</pre></div>
          <div class="result">GenericBlock avec name="section" et attributs complets</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.generic.simpleInline.title">Simple generic inline</h4>
          <p data-i18n="sections.generic.simpleInline.desc">Generic inline container.</p>
          <div class="code-example"><pre>Texte avec :emphase: int√©gr√©e.</pre></div>
          <div class="result">Text + GenericInline + Text</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.generic.namedInline.title">Named generic inline</h4>
          <p data-i18n="sections.generic.namedInline.desc">Inline with a type name.</p>
          <div class="code-example"><pre>Voici un :#span texte styl√©: dans la phrase.</pre></div>
          <div class="result">GenericInline avec name="span"</div>
        </div>
      </section>

      <!-- 5. Attributs -->
      <section id="attributs" class="section">
        <h2>5. üè∑Ô∏è <span data-i18n="sections.attributes.title">Attributes</span></h2>

        <p data-i18n="sections.attributes.intro">Attributes are specified between braces <code>{}</code> and can be combined.</p>

        <table>
          <thead>
            <tr>
              <th data-i18n="sections.attributes.table.type">Type</th>
              <th data-i18n="sections.attributes.table.syntax">Syntax</th>
              <th data-i18n="sections.attributes.table.example">Example</th>
              <th data-i18n="sections.attributes.table.description">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong data-i18n="sections.attributes.table.id">ID</strong></td>
              <td><code>#identifiant</code></td>
              <td><code>{#main}</code></td>
              <td data-i18n="sections.attributes.table.idDesc">Unique identifier</td>
            </tr>
            <tr>
              <td><strong data-i18n="sections.attributes.table.class">Class</strong></td>
              <td><code>.classe</code></td>
              <td><code>{.button}</code></td>
              <td data-i18n="sections.attributes.table.classDesc">CSS class</td>
            </tr>
            <tr>
              <td><strong data-i18n="sections.attributes.table.option">Option</strong></td>
              <td><code>%option</code></td>
              <td><code>{%active}</code></td>
              <td data-i18n="sections.attributes.table.optionDesc">Boolean flag</td>
            </tr>
            <tr>
              <td><strong data-i18n="sections.attributes.table.keyValue">Key-value</strong></td>
              <td><code>key=value</code></td>
              <td><code>{data-id=123}</code></td>
              <td data-i18n="sections.attributes.table.keyValueDesc">Key-value pair</td>
            </tr>
            <tr>
              <td><strong data-i18n="sections.attributes.table.combined">Combined</strong></td>
              <td>Plusieurs attributs</td>
              <td><code>{#main .box %visible size=large}</code></td>
              <td data-i18n="sections.attributes.table.combinedDesc">All types combined</td>
            </tr>
          </tbody>
        </table>

        <div class="syntax-item">
          <h4 data-i18n="sections.attributes.exampleTitle">Complete attributes example</h4>
          <div class="code-example"><pre>:::#article {#post-1 .featured .highlight %published author=John date=2024}
Contenu de l'article
:::</pre></div>
          <div class="result">
            GenericBlock avec :<br>
            - name: "article"<br>
            - id: "post-1"<br>
            - classes: ["featured", "highlight"]<br>
            - options: ["published"]<br>
            - keyValues: {author: "John", date: "2024"}
          </div>
        </div>

        <div class="note" data-i18n="sections.attributes.note">
          Attributes must be closed with <code>}</code>. Multiple attributes can be separated by spaces.
        </div>
      </section>

      <!-- 6. Imbrication -->
      <section id="imbrication" class="section">
        <h2>6. ü™Ü <span data-i18n="sections.nesting.title">Nesting</span></h2>

        <p data-i18n="sections.nesting.intro">Generic blocks can be nested using delimiters of <strong>different lengths</strong>.</p>

        <div class="syntax-item">
          <h4 data-i18n="sections.nesting.simple.title">Simple nesting (2 levels)</h4>
          <div class="code-example"><pre>:::
Bloc externe
:::::
Bloc interne (plus de deux-points)
:::::
Suite du bloc externe
:::</pre></div>
          <div class="result">GenericBlock contenant un GenericBlock imbriqu√©</div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.nesting.multiple.title">Multiple nesting (3 levels)</h4>
          <div class="code-example"><pre>:::
Niveau 1
:::::
Niveau 2
:::::::
Niveau 3
:::::::
Fin niveau 2
:::::
Fin niveau 1
:::</pre></div>
          <div class="result">Trois niveaux de GenericBlock imbriqu√©s</div>
        </div>

        <div class="warning" data-i18n="sections.nesting.warning">
          <strong>Important:</strong> To nest blocks, the inner block MUST have MORE delimiters than the outer block. Otherwise, the first delimiter will close the outer block and the rest will be considered as normal text.
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.nesting.errorTitle">‚ùå Common error: same length</h4>
          <div class="code-example"><pre>:::
Bloc externe
:::
Ceci N'EST PAS un bloc interne
:::
:::</pre></div>
          <div class="result" data-i18n="sections.nesting.errorResult">The first <code>:::</code> closes the block, the rest is normal text</div>
        </div>
      </section>

      <!-- 7. Nommage -->
      <section id="nommage" class="section">
        <h2>7. üè∑Ô∏è <span data-i18n="sections.naming.title">Naming</span></h2>

        <p data-i18n="sections.naming.intro">Blocks and inlines can have a name preceded by <code>#</code>.</p>

        <div class="syntax-item">
          <h4 data-i18n="sections.naming.namedBlocks">Named blocks</h4>
          <div class="code-example"><pre>```#javascript
code
```

!!!#init
script
!!!

:::#container
contenu
:::</pre></div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.naming.namedInlines">Named inlines</h4>
          <div class="code-example"><pre>`#js code`
!#click script!
:#span texte:</pre></div>
        </div>

        <div class="note" data-i18n="sections.naming.note">
          The name can contain letters, numbers, dashes and underscores: <code>[a-zA-Z0-9_-]+</code>
        </div>
      </section>

      <!-- 8. Preprocessor -->
      <section id="preprocessor" class="section">
        <h2>8. üîÑ <span data-i18n="sections.preprocessor.title">Preprocessor Directives</span></h2>

        <p data-i18n="sections.preprocessor.intro">The preprocessor allows you to include external files before parsing.</p>

        <div class="syntax-item">
          <h4 data-i18n="sections.preprocessor.include.title">Include Files</h4>
          <p data-i18n="sections.preprocessor.include.desc">Include content from external files using <code>#include</code> directive.</p>
          <div class="code-example"><pre>#include filename.blocks
#include ./path/to/file.py
#include /absolute/path.js</pre></div>
          <div class="note" data-i18n="sections.preprocessor.include.note">
            Includes are processed recursively. Files are cached to prevent duplicate processing. Relative paths are resolved from <code>basePath</code>.
          </div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.preprocessor.codeInclude.title">Include in Code Blocks</h4>
          <p data-i18n="sections.preprocessor.codeInclude.desc">You can include files inside code blocks.</p>
          <div class="code-example"><pre>```python
#include utils.py
```

!!!javascript
#include config.js
!!!</pre></div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.preprocessor.circular.title">Circular Include (Error)</h4>
          <p data-i18n="sections.preprocessor.circular.desc">Circular includes create infinite loops and will cause an error.</p>
          <div class="code-example"><pre><!-- File A.blocks -->
#include B.blocks

<!-- File B.blocks -->
#include A.blocks  ‚Üê ERROR: Infinite loop</pre></div>
          <div class="warning" data-i18n="sections.preprocessor.circular.warning">
            The preprocessor detects circular dependencies and will throw an error to prevent infinite loops.
          </div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.preprocessor.duplicate.title">Duplicate Include (OK)</h4>
          <p data-i18n="sections.preprocessor.duplicate.desc">The same file can be included multiple times. Files are cached and processed only once.</p>
          <div class="code-example"><pre>#include utils.py
#include nested.blocks
  ‚îî‚îÄ #include utils.py  ‚Üê OK: Cached, no duplicate processing</pre></div>
          <div class="note" data-i18n="sections.preprocessor.duplicate.note">
            File caching ensures efficient processing even with complex include hierarchies.
          </div>
        </div>

        <div class="syntax-item">
          <h4 data-i18n="sections.preprocessor.tryit.title">Try It</h4>
          <p data-i18n="sections.preprocessor.tryit.desc">Test preprocessor features in the interactive playground.</p>
          <p><a href="playground.html" target="_blank" style="color: #667eea; font-weight: 600; font-size: 1.1rem;">üß™ Open Playground ‚Üí</a></p>
        </div>
      </section>

      <!-- 9. Attributes vs Metadata -->
      <section id="attributes-metadata" class="section">
        <h2>9. üè∑Ô∏è Attributes vs Metadata</h2>

        <p>Blocks supports two distinct mechanisms for adding information to blocks: <strong>attributes</strong> (for styling and semantics) and <strong>metadata</strong> (for structured data).</p>

        <div class="syntax-item">
          <h4>Attributes (Block-level styling)</h4>
          <p>Attributes are specified inline with the block delimiter, using CSS-like selector syntax.</p>
          
          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Syntax:</h5>
          <div class="code-example"><pre>:::blockType #id .class1 .class2
Content
:::</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Examples:</h5>
          <div class="code-example"><pre>:::note #intro .important .collapsible
This note has an ID and two CSS classes
:::

:::warning #alert .urgent
Critical warning with ID and class
:::

```python #code-sample .highlight
print("Code block with attributes")
```</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Purpose:</h5>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li><code>#id</code> ‚Üí Unique identifier for referencing</li>
            <li><code>.class</code> ‚Üí CSS classes for styling</li>
            <li>Used for HTML rendering, styling, JavaScript hooks</li>
            <li>Semantic markup</li>
          </ul>
        </div>

        <div class="syntax-item">
          <h4>Metadata (Structured data)</h4>
          <p>Metadata is structured data in YAML format, enclosed in <code>---</code> delimiters.</p>
          
          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Global metadata (frontmatter):</h5>
          <div class="code-example"><pre>---
title: My Document
author: John Doe
date: 2026-02-06
version: 1.0
config:
  debug: true
  theme: dark
---

# Document content starts here</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Local metadata (inside blocks):</h5>
          <div class="code-example"><pre>:::note #intro .important
---
severity: high
dismissible: true
timeout: 5000
actions:
  - dismiss
  - details
---
This note has local metadata
:::</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Purpose:</h5>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Structured data (objects, arrays, primitives)</li>
            <li>Configuration and parameters</li>
            <li>Data accessible to scripts and formatters</li>
            <li>Local metadata overrides global metadata</li>
          </ul>
        </div>

        <div class="syntax-item">
          <h4>Combining Attributes and Metadata</h4>
          <p>Both can be used together for maximum flexibility.</p>
          
          <div class="code-example"><pre>:::warning #critical-alert .urgent .dismissible
---
severity: critical
priority: 1
auto_dismiss: false
sound: true
recipients:
  - admin@example.com
  - ops@example.com
---
Database connection lost!
Attempting to reconnect...
:::</pre></div>

          <div class="note">
            <strong>Breakdown:</strong><br>
            ‚Ä¢ <strong>Attributes</strong>: <code>#critical-alert</code>, <code>.urgent</code>, <code>.dismissible</code> ‚Üí For styling and DOM<br>
            ‚Ä¢ <strong>Metadata</strong>: YAML block ‚Üí For application logic and data
          </div>
        </div>

        <div class="syntax-item">
          <h4>Metadata Scope and Priority</h4>
          
          <p><strong>Global metadata (document level):</strong></p>
          <div class="code-example"><pre>---
theme: light
debug: false
version: 1.0
---

Document content...</pre></div>

          <p style="margin-top: 1rem;"><strong>Local metadata (block level):</strong></p>
          <div class="code-example"><pre>:::section #main
---
theme: dark
debug: true
---
This section overrides global settings
:::</pre></div>

          <div class="note">
            <strong>Priority:</strong> Local metadata > Global metadata
          </div>
        </div>

        <div class="syntax-item">
          <h4>Use Cases</h4>
          
          <p><strong>Attributes:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>CSS styling: <code>.highlight</code>, <code>.warning</code>, <code>.success</code></li>
            <li>JavaScript selectors: <code>#interactive-chart</code></li>
            <li>Accessibility: <code>.screen-reader-only</code></li>
            <li>Layout hints: <code>.full-width</code>, <code>.sidebar</code></li>
          </ul>

          <p style="margin-top: 1rem;"><strong>Metadata:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Configuration: <code>{ timeout: 5000, retries: 3 }</code></li>
            <li>Data binding: <code>{ user: "john", role: "admin" }</code></li>
            <li>Conditional rendering: <code>{ visible: true, collapsed: false }</code></li>
            <li>Analytics: <code>{ track: true, category: "engagement" }</code></li>
          </ul>
        </div>

        <div class="syntax-item">
          <h4>Complete Example</h4>
          
          <div class="code-example"><pre>---
title: User Guide
version: 2.0
author: Documentation Team
---

:::note #installation .step-1
---
platform: linux
required: true
estimated_time: 5
---
Install the package using your package manager
:::

```bash #install-command .copy-button
---
copy_button: true
syntax_highlight: true
---
sudo apt-get install blocks
```

:::warning #compatibility .important
---
min_version: 1.5
platforms: [linux, macos]
---
Windows support is experimental
:::</pre></div>
        </div>
      </section>

      <!-- 10. Inline Elements -->
      <section id="inline-elements" class="section">
        <h2>10. ‚úçÔ∏è Inline Elements</h2>

        <p>Inline elements use a <strong>unified syntax</strong> that supports attributes, making them consistent with blocks while remaining concise for inline use.</p>

        <div class="syntax-item">
          <h4>Unified Syntax</h4>
          <p>All inline elements follow the same pattern:</p>
          
          <div class="code-example"><pre>type:content[#id .class %option key=value]</pre></div>

          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li><strong>type</strong> ‚Äì Inline element type (no <code>#</code> prefix)</li>
            <li><strong>:</strong> ‚Äì Colon separator</li>
            <li><strong>content</strong> ‚Äì The inline content</li>
            <li><strong>[...]</strong> ‚Äì Optional attributes (same syntax as blocks)</li>
          </ul>
        </div>

        <div class="syntax-item">
          <h4>Common Inline Types</h4>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Code inline:</h5>
          <div class="code-example"><pre>Use code:print("hello")[.highlight] in your program.

Multiple: code:const x = 1[#var1] and code:const y = 2[#var2]

With options: code:npm install[.command %copy]</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Link inline:</h5>
          <div class="code-example"><pre>Visit link:https://example.com for more info.

With attributes: link:documentation[.external target="_blank"]

With ID: link:home[#nav-home .nav-link .active]</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Emphasis inline:</h5>
          <div class="code-example"><pre>This is strong:very important[.urgent] information.

Use em:subtle emphasis[.muted] for softer tone.

Combine: strong:Critical![.alert color=red]</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Custom span inline:</h5>
          <div class="code-example"><pre>Highlighted span:text[.highlight .yellow bg=yellow]

Data attributes: span:clickable[data-action="submit" data-id="123"]

Status: span:operational[.status .status-ok data-status="ok"]</pre></div>
        </div>

        <div class="syntax-item">
          <h4>Edge Cases</h4>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Content with brackets:</h5>
          <div class="code-example"><pre>Array access: code:arr[0][.highlight]
The parser sees: type=code, content="arr[0]", attributes=[.highlight]</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Content with colons:</h5>
          <div class="code-example"><pre>URL: code:http://example.com[.url]
Time: code:12:30:45[.timestamp]</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Nested quotes in attributes:</h5>
          <div class="code-example"><pre>link:page[title="Link's title"]
span:text[data-json='{"key": "value"}']</pre></div>

          <div class="note">
            <strong>Note:</strong> The first colon after the type name is the separator. All subsequent colons are part of the content.
          </div>
        </div>

        <div class="syntax-item">
          <h4>Complete Example</h4>
          
          <div class="code-example"><pre>Visit link:https://docs.example.com[.external target="_blank"] for the documentation.

Install using code:npm install blocks[.command %copy] in your terminal.

Status: span:operational[.status .ok data-status="ok"] since yesterday.

Alert: strong:Critical system failure![.alert .urgent color=red]</pre></div>
        </div>
      </section>

      <!-- 11. Variables -->
      <section id="variables" class="section">
        <h2>11. üî§ Variables</h2>

        <p>Variables allow dynamic content substitution from metadata. Blocks supports three types of variable syntax for different use cases.</p>

        <div class="syntax-item">
          <h4>Simple Variables</h4>
          <p>Basic variable substitution using curly braces.</p>
          
          <div class="code-example"><pre>{varname}</pre></div>

          <p style="margin-top: 1rem;"><strong>Example:</strong></p>
          <div class="code-example"><pre>---
username: Alice
title: Welcome Page
count: 42
---

Hello, {username}!
Page title: {title}
Item count: {count}</pre></div>
        </div>

        <div class="syntax-item">
          <h4>Interpolated Variables</h4>
          <p>JavaScript-style string interpolation with <code>$</code> prefix.</p>
          
          <div class="code-example"><pre>${varname}
${object.property}
${array[0]}</pre></div>

          <p style="margin-top: 1rem;"><strong>Example:</strong></p>
          <div class="code-example"><pre>---
base_url: https://api.example.com
api_version: v2
user_id: 12345
---

API endpoint: ${base_url}/${api_version}/users/${user_id}
Result: https://api.example.com/v2/users/12345

Image path: ${base_url}/static/images/logo.png
Result: https://api.example.com/static/images/logo.png</pre></div>

          <div class="note">
            <strong>Use case:</strong> Interpolated variables are ideal for constructing paths, URLs, and composite strings.
          </div>
        </div>

        <div class="syntax-item">
          <h4>Filtered Variables</h4>
          <p>Variables with filters for formatting and transformation.</p>
          
          <div class="code-example"><pre>{varname|filter}
{varname|filter:arg1}
{varname|filter:arg1:arg2}</pre></div>

          <p style="margin-top: 1rem;"><strong>Example:</strong></p>
          <div class="code-example"><pre>---
price: 29.99
date: 2026-02-06
description: This is a very long description that needs truncation
username: john_doe
---

Price: {price|currency:EUR}
Result: ‚Ç¨29.99

Date: {date|date:DD/MM/YYYY}
Result: 06/02/2026

Description: {description|truncate:50}
Result: This is a very long description that needs tru...

Username: {username|upper}
Result: JOHN_DOE</pre></div>
        </div>

        <div class="syntax-item">
          <h4>Filter Chaining</h4>
          <p>Apply multiple filters in sequence using the pipe <code>|</code> operator.</p>
          
          <div class="code-example"><pre>{text|lower|truncate:50}
{description|escape|truncate:100}</pre></div>

          <p style="margin-top: 1rem;"><strong>Example:</strong></p>
          <div class="code-example"><pre>---
text: "HELLO WORLD THIS IS A LONG TEXT"
html: "<script>alert('xss')</script>"
---

Lowercase then truncate:
{text|lower|truncate:20}
Result: hello world this is...

Escape HTML then truncate:
{html|escape|truncate:30}
Result: &lt;script&gt;alert('xss')&lt;/...</pre></div>

          <div class="note">
            <strong>Note:</strong> Filters are applied left-to-right. The output of each filter becomes the input to the next.
          </div>
        </div>

        <div class="syntax-item">
          <h4>Complete Example</h4>
          
          <div class="code-example"><pre>---
title: User Guide
version: 2.0
author: Documentation Team
base_url: https://example.com
price: 29.99
release_date: 2026-02-06
---

/* Welcome to strong:{title}[.brand] version {version}! */

Written by: {author|capitalize}

Visit: link:${base_url}/docs[.external]

Current price: {price|currency:EUR}
Release: {release_date|date:DD/MM/YYYY}</pre></div>
        </div>
      </section>

      <!-- 12. Filter Reference -->
      <section id="filter-reference" class="section">
        <h2>12. üîß Filter Reference</h2>

        <p>Filters transform variable values for display. Each filter takes optional arguments separated by colons.</p>

        <div class="syntax-item">
          <h4>Available Filters</h4>
          
          <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
              <tr style="background: var(--bg-secondary); border-bottom: 2px solid var(--border-color);">
                <th style="padding: 0.75rem; text-align: left; font-weight: 600;">Filter</th>
                <th style="padding: 0.75rem; text-align: left; font-weight: 600;">Arguments</th>
                <th style="padding: 0.75rem; text-align: left; font-weight: 600;">Description</th>
                <th style="padding: 0.75rem; text-align: left; font-weight: 600;">Example</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>upper</code></td>
                <td style="padding: 0.75rem; color: var(--text-secondary);">None</td>
                <td style="padding: 0.75rem;">Convert to uppercase</td>
                <td style="padding: 0.75rem;"><code>{text|upper}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>lower</code></td>
                <td style="padding: 0.75rem; color: var(--text-secondary);">None</td>
                <td style="padding: 0.75rem;">Convert to lowercase</td>
                <td style="padding: 0.75rem;"><code>{text|lower}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>capitalize</code></td>
                <td style="padding: 0.75rem; color: var(--text-secondary);">None</td>
                <td style="padding: 0.75rem;">Capitalize first letter</td>
                <td style="padding: 0.75rem;"><code>{name|capitalize}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>truncate</code></td>
                <td style="padding: 0.75rem;">N (length)</td>
                <td style="padding: 0.75rem;">Truncate to N characters</td>
                <td style="padding: 0.75rem;"><code>{desc|truncate:100}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>date</code></td>
                <td style="padding: 0.75rem;">FORMAT</td>
                <td style="padding: 0.75rem;">Format date string</td>
                <td style="padding: 0.75rem;"><code>{date|date:YYYY-MM-DD}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>currency</code></td>
                <td style="padding: 0.75rem;">CODE</td>
                <td style="padding: 0.75rem;">Format as currency</td>
                <td style="padding: 0.75rem;"><code>{price|currency:EUR}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>number</code></td>
                <td style="padding: 0.75rem;">DECIMALS</td>
                <td style="padding: 0.75rem;">Format number</td>
                <td style="padding: 0.75rem;"><code>{value|number:2}</code></td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem;"><code>json</code></td>
                <td style="padding: 0.75rem; color: var(--text-secondary);">None</td>
                <td style="padding: 0.75rem;">Convert to JSON string</td>
                <td style="padding: 0.75rem;"><code>{data|json}</code></td>
              </tr>
              <tr>
                <td style="padding: 0.75rem;"><code>escape</code></td>
                <td style="padding: 0.75rem; color: var(--text-secondary);">None</td>
                <td style="padding: 0.75rem;">Escape HTML entities</td>
                <td style="padding: 0.75rem;"><code>{html|escape}</code></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="syntax-item">
          <h4>Filter Examples</h4>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Text transformation:</h5>
          <div class="code-example"><pre>{name|upper}        ‚Üí "JOHN DOE"
{name|lower}        ‚Üí "john doe"
{name|capitalize}   ‚Üí "John doe"</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Truncation:</h5>
          <div class="code-example"><pre>{text|truncate:20}  ‚Üí "This is a long te..."</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Date formatting:</h5>
          <div class="code-example"><pre>{date|date:YYYY-MM-DD}      ‚Üí "2026-02-06"
{date|date:DD/MM/YYYY}      ‚Üí "06/02/2026"
{date|date:MMMM D, YYYY}    ‚Üí "February 6, 2026"</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Currency formatting:</h5>
          <div class="code-example"><pre>{price|currency:USD}  ‚Üí "$29.99"
{price|currency:EUR}  ‚Üí "‚Ç¨29.99"
{price|currency:GBP}  ‚Üí "¬£29.99"</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">Number formatting:</h5>
          <div class="code-example"><pre>{value|number:2}   ‚Üí "3.14"
{value|number:0}   ‚Üí "3"</pre></div>

          <h5 style="font-size: 1rem; margin-top: 1rem; color: #764ba2;">HTML escaping:</h5>
          <div class="code-example"><pre>{html|escape}  ‚Üí "&lt;script&gt;alert('xss')&lt;/script&gt;"</pre></div>
        </div>

        <div class="syntax-item">
          <h4>Chaining Filters</h4>
          <p>Combine multiple filters for complex transformations.</p>
          
          <div class="code-example"><pre>/* Lowercase then truncate */
{text|lower|truncate:50}

/* Escape HTML then truncate for safety */
{description|escape|truncate:100}

/* Format number then add currency symbol */
{price|number:2|currency:EUR}

/* Capitalize then truncate name */
{author|capitalize|truncate:30}</pre></div>

          <div class="note">
            <strong>Execution order:</strong> Filters execute left-to-right. Each filter receives the output of the previous filter as its input.
          </div>
        </div>
      </section>

      <!-- 13. Complete Example -->
      <section id="complete-example" class="section">
        <h2>13. üéØ Complete Example</h2>

        <p>This comprehensive example demonstrates all Blocks features working together: blocks, inline elements, variables, filters, attributes, and metadata.</p>

        <div class="syntax-item">
          <h4>Full Document Example</h4>
          
          <div class="code-example"><pre>---
title: User Guide
version: 2.0
author: Documentation Team
base_url: https://example.com
api_endpoint: /api/v2
price: 29.99
install_date: 2026-02-06
---

::: section #intro .hero
---
background: gradient
color: white
---

/* Welcome to strong:{title}[.brand] version {version}! */

Guide written by: {author|capitalize}

Visit our link:${base_url}/docs[.external target="_blank"] for more info.

Current price: {price|currency:EUR}
Installation date: {install_date|date:DD/MM/YYYY}

:::

::: note #installation .important
---
platform: linux
required: true
---

Install using package manager:

```bash #install-cmd .copy-button
sudo apt-get install blocks
```

API endpoint: code:${base_url}${api_endpoint}[.api-path]

Status: span:operational[.status .status-ok data-status="ok"]
:::

::: warning #security .critical
---
severity: high
auto_dismiss: false
---

Always use strong:HTTPS connections[.secure] when accessing:
link:${base_url}${api_endpoint}[.api-link target="_blank"]

Price: {price|currency:USD} or {price|currency:EUR}
:::</pre></div>
        </div>

        <div class="syntax-item">
          <h4>Feature Breakdown</h4>
          
          <p><strong>1. Global Metadata (frontmatter):</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Document-level configuration</li>
            <li>Variables available throughout the document</li>
          </ul>

          <p style="margin-top: 1rem;"><strong>2. Generic Blocks with Attributes:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li><code>::: section #intro .hero</code> ‚Äì Block with ID and class</li>
            <li>Local metadata for block-specific configuration</li>
          </ul>

          <p style="margin-top: 1rem;"><strong>3. Inline Elements:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li><code>strong:{title}[.brand]</code> ‚Äì Emphasis with variable and class</li>
            <li><code>link:${base_url}/docs[.external target="_blank"]</code> ‚Äì Link with interpolation and attributes</li>
            <li><code>code:${base_url}${api_endpoint}[.api-path]</code> ‚Äì Code inline with variables</li>
            <li><code>span:operational[.status .status-ok data-status="ok"]</code> ‚Äì Custom element with data attributes</li>
          </ul>

          <p style="margin-top: 1rem;"><strong>4. Variables:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Simple: <code>{title}</code>, <code>{version}</code></li>
            <li>Interpolated: <code>${base_url}</code>, <code>${api_endpoint}</code></li>
            <li>Filtered: <code>{author|capitalize}</code>, <code>{price|currency:EUR}</code></li>
          </ul>

          <p style="margin-top: 1rem;"><strong>5. Filters:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li><code>capitalize</code> ‚Äì Transform text</li>
            <li><code>currency:EUR</code> ‚Äì Format with argument</li>
            <li><code>date:DD/MM/YYYY</code> ‚Äì Custom date format</li>
          </ul>

          <p style="margin-top: 1rem;"><strong>6. Code Blocks:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Backtick blocks with attributes: <code>```bash #install-cmd .copy-button</code></li>
          </ul>

          <p style="margin-top: 1rem;"><strong>7. Comments:</strong></p>
          <ul style="margin-left: 2rem; margin-top: 0.5rem; color: var(--text-secondary);">
            <li>Block comments: <code>/* Welcome to ... */</code></li>
            <li>Can contain inline elements and variables</li>
          </ul>
        </div>

        <div class="syntax-item">
          <h4>Try It Yourself</h4>
          <p>Copy this example to the playground to see how all features work together!</p>
          <p><a href="public/playground.html" target="_blank" style="color: #667eea; font-weight: 600; font-size: 1.1rem;">üß™ Open Playground ‚Üí</a></p>
        </div>
      </section>

    </div>

    <footer>
      <p><strong data-i18n="footer.title">Blocks Language</strong> - <span data-i18n="footer.subtitle">An extensible and readable markup language</span></p>
      <p style="margin-top: 0.5rem; opacity: 0.7;" data-i18n="footer.docs">For more information, see the complete documentation</p>
      <p style="margin-top: 1rem;">
        <a href="public/playground.html" style="color: #667eea; text-decoration: none; margin: 0 1rem;">üéÆ Try the Playground</a>
        <span style="color: rgba(255,255,255,0.3);">|</span>
        <a href="https://github.com/jt291/blocks" target="_blank" style="color: #667eea; text-decoration: none; margin: 0 1rem;">üì¶ View on GitHub</a>
      </p>
    </footer>
  </div>

  <script>
    // Translation object with FR and EN content
    const translations = {
      en: {
        title: "Blocks Language",
        subtitle: "Complete syntax reference guide",
        toc: "Table of Contents",
        sections: {
          comments: {
            title: "Comments",
            blockComment: {
              title: "Block comment",
              desc: "Multi-line comment that doesn't appear in final output."
            },
            blockCommentNamed: {
              title: "Named block comment",
              desc: "Comment with an identifier for reference or specific processing."
            },
            inlineComment: {
              title: "Inline comment",
              desc: "Single-line comment, integrated in text."
            },
            inlineCommentNamed: {
              title: "Named inline comment",
              desc: "Inline comment with an identifier."
            }
          },
          code: {
            title: "Code Blocks and Inlines",
            simpleBlock: {
              title: "Simple code block",
              desc: "Code block with minimum 3 backticks."
            },
            namedBlock: {
              title: "Named code block",
              desc: "Code block with a language or identifier."
            },
            blockWithAttrs: {
              title: "Code block with attributes",
              desc: "Code block enriched with metadata."
            },
            simpleInline: {
              title: "Simple inline code",
              desc: "Code integrated in a line of text."
            },
            namedInline: {
              title: "Named inline code",
              desc: "Inline code with a language identifier."
            },
            note: "Opening and closing backticks must have the <strong>same number</strong> of characters."
          },
          script: {
            title: "Script Blocks and Inlines",
            simpleBlock: {
              title: "Simple script block",
              desc: "Executable script block with minimum 3 exclamation marks."
            },
            namedBlock: {
              title: "Named script block",
              desc: "Script block with an identifier."
            },
            simpleInline: {
              title: "Simple inline script",
              desc: "Executable script integrated in text."
            },
            namedInline: {
              title: "Named inline script",
              desc: "Inline script with an identifier."
            },
            warning: "Opening and closing delimiters must have the <strong>same number</strong> of exclamation marks."
          },
          generic: {
            title: "Generic Blocks and Inlines",
            simpleBlock: {
              title: "Simple generic block",
              desc: "Generic container block with minimum 3 colons."
            },
            namedBlock: {
              title: "Named generic block",
              desc: "Block with a type name (div, section, aside, etc.)."
            },
            blockWithAttrs: {
              title: "Generic block with attributes",
              desc: "Block enriched with ID, classes, options and key-value pairs."
            },
            simpleInline: {
              title: "Simple generic inline",
              desc: "Generic inline container."
            },
            namedInline: {
              title: "Named generic inline",
              desc: "Inline with a type name."
            }
          },
          attributes: {
            title: "Attributes",
            intro: "Attributes are specified between braces <code>{}</code> and can be combined.",
            table: {
              type: "Type",
              syntax: "Syntax",
              example: "Example",
              description: "Description",
              id: "ID",
              idDesc: "Unique identifier",
              class: "Class",
              classDesc: "CSS class",
              option: "Option",
              optionDesc: "Boolean flag",
              keyValue: "Key-value",
              keyValueDesc: "Key-value pair",
              combined: "Combined",
              combinedDesc: "All types combined"
            },
            exampleTitle: "Complete attributes example",
            note: "Attributes must be closed with <code>}</code>. Multiple attributes can be separated by spaces."
          },
          nesting: {
            title: "Nesting",
            intro: "Generic blocks can be nested using delimiters of <strong>different lengths</strong>.",
            simple: {
              title: "Simple nesting (2 levels)"
            },
            multiple: {
              title: "Multiple nesting (3 levels)"
            },
            warning: "<strong>Important:</strong> To nest blocks, the inner block MUST have MORE delimiters than the outer block. Otherwise, the first delimiter will close the outer block and the rest will be considered as normal text.",
            errorTitle: "‚ùå Common error: same length",
            errorResult: "The first <code>:::</code> closes the block, the rest is normal text"
          },
          naming: {
            title: "Naming",
            intro: "Blocks and inlines can have a name preceded by <code>#</code>.",
            namedBlocks: "Named blocks",
            namedInlines: "Named inlines",
            note: "The name can contain letters, numbers, dashes and underscores: <code>[a-zA-Z0-9_-]+</code>"
          },
          preprocessor: {
            title: "Preprocessor Directives",
            intro: "The preprocessor allows you to include external files before parsing.",
            include: {
              title: "Include Files",
              desc: "Include content from external files using <code>#include</code> directive.",
              note: "Includes are processed recursively. Files are cached to prevent duplicate processing. Relative paths are resolved from <code>basePath</code>."
            },
            codeInclude: {
              title: "Include in Code Blocks",
              desc: "You can include files inside code blocks."
            },
            circular: {
              title: "Circular Include (Error)",
              desc: "Circular includes create infinite loops and will cause an error.",
              warning: "The preprocessor detects circular dependencies and will throw an error to prevent infinite loops."
            },
            duplicate: {
              title: "Duplicate Include (OK)",
              desc: "The same file can be included multiple times. Files are cached and processed only once.",
              note: "File caching ensures efficient processing even with complex include hierarchies."
            },
            tryit: {
              title: "Try It",
              desc: "Test preprocessor features in the interactive playground."
            }
          }
        },
        footer: {
          title: "Blocks Language",
          subtitle: "An extensible and readable markup language",
          docs: "For more information, see the complete documentation"
        }
      },
      fr: {
        title: "Langage Blocks",
        subtitle: "Guide de r√©f√©rence complet de la syntaxe",
        toc: "Table des mati√®res",
        sections: {
          comments: {
            title: "Commentaires",
            blockComment: {
              title: "Commentaire de bloc",
              desc: "Commentaire multi-lignes qui n'appara√Æt pas dans le r√©sultat final."
            },
            blockCommentNamed: {
              title: "Commentaire de bloc nomm√©",
              desc: "Commentaire avec un identifiant pour r√©f√©rence ou traitement sp√©cifique."
            },
            inlineComment: {
              title: "Commentaire inline",
              desc: "Commentaire sur une seule ligne, int√©gr√© dans le texte."
            },
            inlineCommentNamed: {
              title: "Commentaire inline nomm√©",
              desc: "Commentaire inline avec un identifiant."
            }
          },
          code: {
            title: "Blocs et inlines de code",
            simpleBlock: {
              title: "Bloc de code simple",
              desc: "Bloc de code avec minimum 3 backticks."
            },
            namedBlock: {
              title: "Bloc de code nomm√©",
              desc: "Bloc de code avec un langage ou un identifiant."
            },
            blockWithAttrs: {
              title: "Bloc de code avec attributs",
              desc: "Bloc de code enrichi avec des m√©tadonn√©es."
            },
            simpleInline: {
              title: "Code inline simple",
              desc: "Code int√©gr√© dans une ligne de texte."
            },
            namedInline: {
              title: "Code inline nomm√©",
              desc: "Code inline avec un identifiant de langage."
            },
            note: "Les backticks d'ouverture et de fermeture doivent avoir le <strong>m√™me nombre</strong> de caract√®res."
          },
          script: {
            title: "Blocs et inlines de script",
            simpleBlock: {
              title: "Bloc de script simple",
              desc: "Bloc de script ex√©cutable avec minimum 3 points d'exclamation."
            },
            namedBlock: {
              title: "Bloc de script nomm√©",
              desc: "Bloc de script avec un identifiant."
            },
            simpleInline: {
              title: "Script inline simple",
              desc: "Script ex√©cutable int√©gr√© dans le texte."
            },
            namedInline: {
              title: "Script inline nomm√©",
              desc: "Script inline avec un identifiant."
            },
            warning: "Les d√©limiteurs d'ouverture et de fermeture doivent avoir le <strong>m√™me nombre</strong> de points d'exclamation."
          },
          generic: {
            title: "Blocs et inlines g√©n√©riques",
            simpleBlock: {
              title: "Bloc g√©n√©rique simple",
              desc: "Bloc conteneur g√©n√©rique avec minimum 3 deux-points."
            },
            namedBlock: {
              title: "Bloc g√©n√©rique nomm√©",
              desc: "Bloc avec un nom de type (div, section, aside, etc.)."
            },
            blockWithAttrs: {
              title: "Bloc g√©n√©rique avec attributs",
              desc: "Bloc enrichi avec ID, classes, options et paires cl√©-valeur."
            },
            simpleInline: {
              title: "Inline g√©n√©rique simple",
              desc: "Conteneur inline g√©n√©rique."
            },
            namedInline: {
              title: "Inline g√©n√©rique nomm√©",
              desc: "Inline avec un nom de type."
            }
          },
          attributes: {
            title: "Attributs",
            intro: "Les attributs sont sp√©cifi√©s entre accolades <code>{}</code> et peuvent √™tre combin√©s.",
            table: {
              type: "Type",
              syntax: "Syntaxe",
              example: "Exemple",
              description: "Description",
              id: "ID",
              idDesc: "Identifiant unique",
              class: "Classe",
              classDesc: "Classe CSS",
              option: "Option",
              optionDesc: "Drapeau bool√©en",
              keyValue: "Cl√©-valeur",
              keyValueDesc: "Paire cl√©-valeur",
              combined: "Combin√©",
              combinedDesc: "Tous les types combin√©s"
            },
            exampleTitle: "Exemple complet d'attributs",
            note: "Les attributs doivent √™tre ferm√©s avec <code>}</code>. Plusieurs attributs peuvent √™tre s√©par√©s par des espaces."
          },
          nesting: {
            title: "Imbrication",
            intro: "Les blocs g√©n√©riques peuvent √™tre imbriqu√©s en utilisant des d√©limiteurs de <strong>longueurs diff√©rentes</strong>.",
            simple: {
              title: "Imbrication simple (2 niveaux)"
            },
            multiple: {
              title: "Imbrication multiple (3 niveaux)"
            },
            warning: "<strong>Important :</strong> Pour imbriquer des blocs, le bloc interne DOIT avoir PLUS de d√©limiteurs que le bloc externe. Sinon, le premier d√©limiteur fermera le bloc externe et le reste sera consid√©r√© comme du texte normal.",
            errorTitle: "‚ùå Erreur courante : m√™me longueur",
            errorResult: "Le premier <code>:::</code> ferme le bloc, le reste est du texte normal"
          },
          naming: {
            title: "Nommage",
            intro: "Les blocs et inlines peuvent avoir un nom pr√©c√©d√© de <code>#</code>.",
            namedBlocks: "Blocs nomm√©s",
            namedInlines: "Inlines nomm√©s",
            note: "Le nom peut contenir des lettres, chiffres, tirets et underscores : <code>[a-zA-Z0-9_-]+</code>"
          },
          preprocessor: {
            title: "Directives de pr√©processeur",
            intro: "Le pr√©processeur permet d'inclure des fichiers externes avant l'analyse.",
            include: {
              title: "Inclure des fichiers",
              desc: "Inclure le contenu de fichiers externes avec la directive <code>#include</code>.",
              note: "Les inclusions sont trait√©es r√©cursivement. Les fichiers sont mis en cache pour √©viter les traitements en double. Les chemins relatifs sont r√©solus depuis <code>basePath</code>."
            },
            codeInclude: {
              title: "Inclure dans les blocs de code",
              desc: "Vous pouvez inclure des fichiers dans les blocs de code."
            },
            circular: {
              title: "Inclusion circulaire (Erreur)",
              desc: "Les inclusions circulaires cr√©ent des boucles infinies et causeront une erreur.",
              warning: "Le pr√©processeur d√©tecte les d√©pendances circulaires et g√©n√®re une erreur pour √©viter les boucles infinies."
            },
            duplicate: {
              title: "Inclusion en double (OK)",
              desc: "Le m√™me fichier peut √™tre inclus plusieurs fois. Les fichiers sont mis en cache et trait√©s une seule fois.",
              note: "La mise en cache des fichiers assure un traitement efficace m√™me avec des hi√©rarchies d'inclusion complexes."
            },
            tryit: {
              title: "Essayez-le",
              desc: "Testez les fonctionnalit√©s du pr√©processeur dans l'aire de jeu interactive."
            }
          }
        },
        footer: {
          title: "Langage Blocks",
          subtitle: "Un langage de balisage extensible et lisible",
          docs: "Pour plus d'informations, consultez la documentation compl√®te"
        }
      }
    };

    let currentLang = 'en';
    let currentTheme = 'auto';

    // Load saved preferences
    if (localStorage.getItem('cheatsheet-lang')) {
      currentLang = localStorage.getItem('cheatsheet-lang');
    }
    if (localStorage.getItem('cheatsheet-theme')) {
      currentTheme = localStorage.getItem('cheatsheet-theme');
    }

    // Apply theme
    document.documentElement.setAttribute('data-theme', currentTheme);
    document.getElementById('themeSelect').value = currentTheme;
    document.getElementById('langSelect').value = currentLang;

    // Language selector
    document.getElementById('langSelect').addEventListener('change', (e) => {
      currentLang = e.target.value;
      localStorage.setItem('cheatsheet-lang', currentLang);
      updateContent();
    });

    // Theme selector
    document.getElementById('themeSelect').addEventListener('change', (e) => {
      currentTheme = e.target.value;
      localStorage.setItem('cheatsheet-theme', currentTheme);
      document.documentElement.setAttribute('data-theme', currentTheme);
    });

    // Helper function to get nested value from object
    function getNestedValue(obj, path) {
      return path.split('.').reduce((current, key) => current?.[key], obj);
    }

    // Update content based on language
    function updateContent() {
      const t = translations[currentLang];
      
      // Update page title and subtitle
      document.getElementById('pageTitle').textContent = t.title;
      document.getElementById('pageSubtitle').textContent = t.subtitle;
      
      // Update all elements with data-i18n attribute
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const value = getNestedValue(t, key);
        if (value) {
          el.innerHTML = value;
        }
      });
      
      // Update TOC links to include section numbers
      const tocLinks = document.querySelectorAll('.toc a');
      tocLinks[0].innerHTML = '1. ' + t.sections.comments.title;
      tocLinks[1].innerHTML = '2. ' + t.sections.code.title;
      tocLinks[2].innerHTML = '3. ' + t.sections.script.title;
      tocLinks[3].innerHTML = '4. ' + t.sections.generic.title;
      tocLinks[4].innerHTML = '5. ' + t.sections.attributes.title;
      tocLinks[5].innerHTML = '6. ' + t.sections.nesting.title;
      tocLinks[6].innerHTML = '7. ' + t.sections.naming.title;
    }

    // Initialize content on page load
    updateContent();
  </script>
</body>
</html>
